{"version":3,"sources":["../../../lunchyapp/routes/api/index.js"],"names":["router","require","Router","scraper","order","userRoutes","use","req","res","body","restaurant","then","send","data","post","user","_id","group","theOrder","userOrder","userid","groupid","id","newOrder","deleteOrder","getOrders","module","exports"],"mappings":";;AAAA,IAAMA,SAASC,QAAQ,SAAR,EAAmBC,MAAnB,EAAf;AACA,IAAMC,UAAUF,QAAQ,wBAAR,CAAhB;AACA,IAAMG,QAAQH,QAAQ,6BAAR,CAAd;AACA,IAAMI,aAAaJ,QAAQ,WAAR,CAAnB;;AAEA;AACAD,OAAOM,GAAP,CAAW,UAAX,EAAuB,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACtCL,YAAQI,IAAIE,IAAJ,CAASC,UAAjB,EAA6BC,IAA7B,CAAkC,gBAAQ;AACtCH,YAAII,IAAJ,CAASC,IAAT;AACH,KAFD;AAGH,CAJD;;AAMA;AACAb,OAAOc,IAAP,CAAY,MAAZ,EAAoB,UAASP,GAAT,EAAcC,GAAd,EAAmB;AACnC;;AADmC,oBAGZD,IAAIQ,IAHQ;AAAA,QAG3BC,GAH2B,aAG3BA,GAH2B;AAAA,QAGtBC,KAHsB,aAGtBA,KAHsB;AAInC;;AAJmC,QAK3BC,QAL2B,GAKdX,IAAIE,IALU,CAK3BS,QAL2B;;;AAOnC,QAAIC,YAAY;AACZC,gBAAQJ,GADI;AAEZK,iBAASJ,MAAMK,EAFH;AAGZJ,kBAAUA;AAHE,KAAhB;;AAMAd,UAAMmB,QAAN,CAAeJ,SAAf,EAA0B,UAASN,IAAT,EAAe;AACrCL,YAAII,IAAJ,CAASC,IAAT;AACH,KAFD;AAGH,CAhBD;;AAmBA;AACAb,OAAOc,IAAP,CAAY,SAAZ,EAAuB,UAASP,GAAT,EAAcC,GAAd,EAAmB;;AAEtCJ,UAAMoB,WAAN,CAAkBjB,IAAIQ,IAAtB,EAA4BR,IAAIE,IAAhC,EAAsC,YAAW;AAC7CL,cAAMqB,SAAN,CAAgBlB,IAAIQ,IAAJ,CAASE,KAAT,CAAeK,EAA/B,EAAmC,UAAST,IAAT,EAAe;AAC1CL,gBAAII,IAAJ,CAASC,IAAT;AACH,SAFL;;AAIA;;;AAGA;AACH,KATD;AAUH,CAZD;;AAeA;AACAb,OAAOM,GAAP,CAAW,OAAX,EAAoBD,UAApB;;AAEAqB,OAAOC,OAAP,GAAiB3B,MAAjB","file":"index.js","sourcesContent":["const router = require(\"express\").Router();\nconst scraper = require(\"../../utils/scraper.js\");\nconst order = require(\"../../middlewares/orders.js\");\nconst userRoutes = require(\"./user.js\");\n\n// Scraper route\nrouter.use(\"/scraper\", function(req, res) {\n    scraper(req.body.restaurant).then(data => {\n        res.send(data);\n    });\n});\n\n// Add Item route\nrouter.post(\"/add\", function(req, res) {\n    // console.log(req.user)\n\n    const { _id, group } = req.user;\n    // console.log(req.user)\n    const { theOrder } = req.body;\n\n    let userOrder = {\n        userid: _id,\n        groupid: group.id,\n        theOrder: theOrder\n    }\n\n    order.newOrder(userOrder, function(data) {\n        res.send(data);\n    });\n});\n\n\n//delete\nrouter.post(\"/delete\", function(req, res) {\n\n    order.deleteOrder(req.user, req.body, function() {\n        order.getOrders(req.user.group.id, function(data) {\n                res.send(data);\n            });\n        \n        // if (req.user.group.admin) {\n            \n            \n        // }\n    });\n});\n\n\n//User API routes\nrouter.use(\"/user\", userRoutes);\n\nmodule.exports = router;\n"]}