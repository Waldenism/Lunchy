{"version":3,"sources":["../../../lunchyapp/routes/api/index.js"],"names":["router","require","Router","scraper","order","userRoutes","use","req","res","body","restaurant","then","send","data","post","user","_id","group","name","theOrder","userOrder","userid","groupid","id","newOrder","deleteOrder","getOrders","module","exports"],"mappings":";;AAAA,IAAMA,SAASC,QAAQ,SAAR,EAAmBC,MAAnB,EAAf;AACA,IAAMC,UAAUF,QAAQ,wBAAR,CAAhB;AACA,IAAMG,QAAQH,QAAQ,6BAAR,CAAd;AACA,IAAMI,aAAaJ,QAAQ,WAAR,CAAnB;;AAEA;AACAD,OAAOM,GAAP,CAAW,UAAX,EAAuB,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACtCL,YAAQI,IAAIE,IAAJ,CAASC,UAAjB,EAA6BC,IAA7B,CAAkC,gBAAQ;AACtCH,YAAII,IAAJ,CAASC,IAAT;AACH,KAFD;AAGH,CAJD;;AAMA;AACAb,OAAOc,IAAP,CAAY,MAAZ,EAAoB,UAASP,GAAT,EAAcC,GAAd,EAAmB;AACnC,QAAI,CAACD,IAAIQ,IAAT,EAAe;AACXP,YAAII,IAAJ,CAAS,wBAAT;AACH;;AAHkC,oBAKNL,IAAIQ,IALE;AAAA,QAK3BC,GAL2B,aAK3BA,GAL2B;AAAA,QAKtBC,KALsB,aAKtBA,KALsB;AAAA,QAKfC,IALe,aAKfA,IALe;AAAA,QAM3BC,QAN2B,GAMdZ,IAAIE,IANU,CAM3BU,QAN2B;;;AAQnC,QAAIC,YAAY;AACZC,gBAAQL,GADI;AAEZE,cAAMA,IAFM;AAGZI,iBAASL,MAAMM,EAHH;AAIZJ,kBAAUA;AAJE,KAAhB;;AAOAf,UAAMoB,QAAN,CAAeJ,SAAf;AACAZ,QAAII,IAAJ,CAASQ,SAAT;AACH,CAjBD;;AAoBA;AACApB,OAAOc,IAAP,CAAY,SAAZ,EAAuB,UAASP,GAAT,EAAcC,GAAd,EAAmB;;AAEtCJ,UAAMqB,WAAN,CAAkBlB,IAAIQ,IAAtB,EAA4BR,IAAIE,IAAhC,EAAsC,YAAW;AAC7CL,cAAMsB,SAAN,CAAgBnB,IAAIQ,IAAJ,CAASE,KAAT,CAAeM,EAA/B,EAAmC,UAASV,IAAT,EAAe;AAC9CL,gBAAII,IAAJ,CAASC,IAAT;AACH,SAFD;AAGH,KAJD;AAKH,CAPD;;AAUA;AACAb,OAAOM,GAAP,CAAW,OAAX,EAAoBD,UAApB;;AAEAsB,OAAOC,OAAP,GAAiB5B,MAAjB","file":"index.js","sourcesContent":["const router = require(\"express\").Router();\nconst scraper = require(\"../../utils/scraper.js\");\nconst order = require(\"../../middlewares/orders.js\");\nconst userRoutes = require(\"./user.js\");\n\n// Scraper route\nrouter.use(\"/scraper\", function(req, res) {\n    scraper(req.body.restaurant).then(data => {\n        res.send(data);\n    });\n});\n\n// Add Item route\nrouter.post(\"/add\", function(req, res) {\n    if (!req.user) {\n        res.send('You are not logged in!')\n    }\n\n    const { _id, group, name } = req.user;\n    const { theOrder } = req.body;\n\n    let userOrder = {\n        userid: _id,\n        name: name,\n        groupid: group.id,\n        theOrder: theOrder\n    }\n\n    order.newOrder(userOrder);\n    res.send(userOrder);\n});\n\n\n//delete\nrouter.post(\"/delete\", function(req, res) {\n\n    order.deleteOrder(req.user, req.body, function() {\n        order.getOrders(req.user.group.id, function(data) {\n            res.send(data);\n        });\n    });\n});\n\n\n//User API routes\nrouter.use(\"/user\", userRoutes);\n\nmodule.exports = router;\n"]}