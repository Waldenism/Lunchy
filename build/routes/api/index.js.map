{"version":3,"sources":["../../../lunchyapp/routes/api/index.js"],"names":["router","require","Router","scraper","order","userRoutes","use","req","res","body","restaurant","then","send","data","post","user","_id","group","theOrder","userOrder","userid","groupid","id","newOrder","console","log","deleteOrder","module","exports"],"mappings":";;AAAA,IAAMA,SAASC,QAAQ,SAAR,EAAmBC,MAAnB,EAAf;AACA,IAAMC,UAAUF,QAAQ,wBAAR,CAAhB;AACA,IAAMG,QAAQH,QAAQ,6BAAR,CAAd;AACA,IAAMI,aAAaJ,QAAQ,WAAR,CAAnB;;AAEA;AACAD,OAAOM,GAAP,CAAW,UAAX,EAAuB,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACtCL,YAAQI,IAAIE,IAAJ,CAASC,UAAjB,EAA6BC,IAA7B,CAAkC,gBAAQ;AACtCH,YAAII,IAAJ,CAASC,IAAT;AACH,KAFD;AAGH,CAJD;;AAMA;AACAb,OAAOc,IAAP,CAAY,MAAZ,EAAoB,UAASP,GAAT,EAAcC,GAAd,EAAmB;AAAA,oBACZD,IAAIQ,IADQ;AAAA,QAC3BC,GAD2B,aAC3BA,GAD2B;AAAA,QACtBC,KADsB,aACtBA,KADsB;AAAA,QAE3BC,QAF2B,GAEdX,IAAIE,IAFU,CAE3BS,QAF2B;;;AAInC,QAAIC,YAAY;AACZC,gBAAQJ,GADI;AAEZK,iBAASJ,MAAMK,EAFH;AAGZJ,kBAAUA;AAHE,KAAhB;;AAMAd,UAAMmB,QAAN,CAAeJ,SAAf,EAA0B,UAASN,IAAT,EAAe;AACrCL,YAAII,IAAJ,CAASC,IAAT;AACAW,gBAAQC,GAAR,CAAYZ,IAAZ;AACH,KAHD;AAIH,CAdD;;AAgBAb,OAAOc,IAAP,CAAY,SAAZ,EAAuB,UAASP,GAAT,EAAcC,GAAd,EAAmB;AACtCJ,UAAMsB,WAAN,CAAkBnB,IAAIQ,IAAtB,EAA4BR,IAAIE,IAAhC,EAAsC,UAASI,IAAT,EAAe;AACjDL,YAAII,IAAJ,CAASC,IAAT;AACH,KAFD;AAGH,CAJD;;AAOA;AACAb,OAAOM,GAAP,CAAW,OAAX,EAAoBD,UAApB;;AAEAsB,OAAOC,OAAP,GAAiB5B,MAAjB","file":"index.js","sourcesContent":["const router = require(\"express\").Router();\nconst scraper = require(\"../../utils/scraper.js\");\nconst order = require(\"../../middlewares/orders.js\");\nconst userRoutes = require(\"./user.js\");\n\n// Scraper route\nrouter.use(\"/scraper\", function(req, res) {\n    scraper(req.body.restaurant).then(data => {\n        res.send(data);\n    });\n});\n\n// Add Item route\nrouter.post(\"/add\", function(req, res) {\n    const { _id, group } = req.user;\n    const { theOrder } = req.body;\n\n    let userOrder = {\n        userid: _id,\n        groupid: group.id,\n        theOrder: theOrder\n    }\n\n    order.newOrder(userOrder, function(data) {\n        res.send(data);\n        console.log(data);\n    });\n});\n\nrouter.post(\"/delete\", function(req, res) {\n    order.deleteOrder(req.user, req.body, function(data) {\n        res.send(data);\n    });\n});\n\n\n//User API routes\nrouter.use(\"/user\", userRoutes);\n\nmodule.exports = router;\n"]}