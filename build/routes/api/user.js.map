{"version":3,"sources":["../../../lunchyapp/routes/api/user.js"],"names":["router","require","Router","order","user","get","req","res","send","console","log","group","admin","id","getOrders","data","groupData","name","_id","getMyOrders","post","info","userid","newInfo","body","updateInfo","module","exports"],"mappings":";;AAAA,IAAMA,SAASC,QAAQ,SAAR,EAAmBC,MAAnB,EAAf;AACA,IAAMC,QAAQF,QAAQ,6BAAR,CAAd;AACA,IAAMG,OAAOH,QAAQ,uBAAR,CAAb;;AAGA;AACAD,OAAOK,GAAP,CAAW,UAAX,EAAuB,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACtCA,MAAIC,IAAJ,CAASF,IAAIF,IAAb;AACAK,UAAQC,GAAR,CAAY,cAAcJ,IAAIF,IAA9B;AACH,CAHD;;AAMA;AACAJ,OAAOK,GAAP,CAAW,eAAX,EAA4B,UAASC,GAAT,EAAcC,GAAd,EAAmB;;AAE7C,MAAID,IAAIF,IAAR,EAAc;AAAA,0BACQE,IAAIF,IAAJ,CAASO,KADjB;AAAA,QACNC,KADM,mBACNA,KADM;AAAA,QACCC,EADD,mBACCA,EADD;;;AAGZ,QAAID,KAAJ,EAAW;AACTT,YAAMW,SAAN,CAAgBD,EAAhB,EAAoB,UAASE,IAAT,EAAe;AAC/B,YAAIC,YAAY;AACdC,gBAAMX,IAAIF,IAAJ,CAASO,KAAT,CAAeM,IADP;AAEdF,gBAAMA;AAFQ,SAAhB;;AAKAR,YAAIC,IAAJ,CAASQ,SAAT;AACH,OAPD;AAQD;AACF;AACF,CAhBD;;AAkBAhB,OAAOK,GAAP,CAAW,YAAX,EAAyB,UAASC,GAAT,EAAcC,GAAd,EAAmB;;AAE1C,MAAID,IAAIF,IAAR,EAAc;AAAA,QACNc,GADM,GACEZ,IAAIF,IADN,CACNc,GADM;;AAEZf,UAAMgB,WAAN,CAAkBD,GAAlB,EAAuB,UAASH,IAAT,EAAe;AACpCR,UAAIC,IAAJ,CAASO,IAAT;AACD,KAFD;AAGD;AACF,CARD;;AAUAf,OAAOoB,IAAP,CAAY,iBAAZ,EAA+B,UAASd,GAAT,EAAcC,GAAd,EAAmB;AAChD,MAAIc,OAAO;AACTC,YAAQhB,IAAIF,IAAJ,CAASc,GADR;AAETK,aAASjB,IAAIkB;AAFJ,GAAX;;AAKApB,OAAKqB,UAAL,CAAgBJ,IAAhB,EAAsB,UAASN,IAAT,EAAe;AACnCR,QAAIC,IAAJ,CAASO,IAAT;AACD,GAFD;AAGD,CATD;;AAWAW,OAAOC,OAAP,GAAiB3B,MAAjB","file":"user.js","sourcesContent":["const router = require(\"express\").Router();\nconst order = require(\"../../middlewares/orders.js\");\nconst user = require(\"../../config/users.js\");\n\n\n// Check Login Status\nrouter.get(\"/current\", function(req, res) {\n    res.send(req.user);\n    console.log('current: ' + req.user)\n});\n\n\n// Matches with \"/api/scraper/subway\"\nrouter.get('/group-orders', function(req, res) {\n\n  if (req.user) {\n    let { admin, id } = req.user.group\n\n    if (admin) {\n      order.getOrders(id, function(data) {\n          let groupData = {\n            name: req.user.group.name,\n            data: data\n          }\n\n          res.send(groupData);\n      });\n    }\n  }\n});\n\nrouter.get('/my-orders', function(req, res) {\n\n  if (req.user) {\n    let { _id } = req.user\n    order.getMyOrders(_id, function(data) {\n      res.send(data)\n    })\n  }\n})\n\nrouter.post('/update-account', function(req, res) {\n  let info = {\n    userid: req.user._id,\n    newInfo: req.body\n  };\n\n  user.updateInfo(info, function(data) {\n    res.send(data)\n  })\n});\n\nmodule.exports = router;"]}