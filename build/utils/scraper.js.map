{"version":3,"sources":["../../lunchyapp/utils/scraper.js"],"names":["restaurants","dairyqueen","menu","item","titleattr","image","imgattr","homepage","subway","scraper","selection","Promise","resolve","reject","get","error","response","body","$","load","results","find","each","i","element","menuItem","name","attr","push","text","index","picture","pic","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA,IAAMA,cAAc;AAChBC,gBAAY;AACRC,cAAM,6CADE;AAERC,cAAM,YAFE;AAGRC,mBAAW,OAHH;AAIRC,eAAO,iBAJC;AAKRC,iBAAS,KALD;AAMRC,kBAAU;AANF,KADI;;AAUhBC,YAAQ;AACJN,cAAM,oDADF;AAEJC,cAAK,sBAFD;AAGJC,mBAAW,IAHP;AAIJC,eAAO,kBAJH;AAKJC,iBAAS,KALL;AAMJC,kBAAU;AANN;;AAVQ,CAApB;;AAqBA,IAAME,UAAU,SAAVA,OAAU,CAASC,SAAT,EAAoB;AAAA,gCAE4BV,YAAYU,SAAZ,CAF5B;AAAA,QAExBR,IAFwB,yBAExBA,IAFwB;AAAA,QAElBC,IAFkB,yBAElBA,IAFkB;AAAA,QAEZC,SAFY,yBAEZA,SAFY;AAAA,QAEDC,KAFC,yBAEDA,KAFC;AAAA,QAEMC,OAFN,yBAEMA,OAFN;AAAA,QAEeC,QAFf,yBAEeA,QAFf;;;AAIhC,WAAO,IAAII,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;;AAEzC,0BAAQC,GAAR,CAAYZ,IAAZ,EAAkB,UAASa,KAAT,EAAgBC,QAAhB,EAA0BC,IAA1B,EAAgC;AAC9C,gBAAMC,IAAI,kBAAQC,IAAR,CAAaF,IAAb,CAAV;AACA,gBAAIG,UAAU,EAAd;;AAEA,gBAAIV,cAAc,YAAlB,EAAgC;AAC5BQ,kBAAEf,IAAF,EAAQkB,IAAR,CAAa,GAAb,EAAkBC,IAAlB,CAAuB,UAASC,CAAT,EAAYC,OAAZ,EAAqB;AACxC,wBAAIC,WAAW,EAAf;AACAA,6BAASC,IAAT,GAAgBR,EAAEM,OAAF,EAAWG,IAAX,CAAgB,OAAhB,CAAhB;AACAP,4BAAQQ,IAAR,CAAaH,QAAb;AACH,iBAJD;AAKH,aAND,MAMO,IAAIf,cAAc,QAAlB,EAA4B;AAC/BQ,kBAAEf,IAAF,EAAQmB,IAAR,CAAa,UAASC,CAAT,EAAYC,OAAZ,EAAqB;AAC9B,wBAAIC,WAAW,EAAf;AACAA,6BAASC,IAAT,GAAgBR,EAAEM,OAAF,EAAWK,IAAX,EAAhB;AACAT,4BAAQQ,IAAR,CAAaH,QAAb;AACH,iBAJD;AAKH;;AAEDP,cAAEb,KAAF,EAASgB,IAAT,CAAc,KAAd,EAAqBC,IAArB,CAA0B,UAACQ,KAAD,EAAQC,OAAR,EAAoB;AAC1C,oBAAIC,MAAMd,EAAEa,OAAF,EAAWJ,IAAX,CAAgBrB,OAAhB,CAAV;AACAc,wBAAQU,KAAR,EAAezB,KAAf,GAAuBE,WAAWyB,GAAlC;AACH,aAHD;;AAKApB,oBAAQQ,OAAR;AACH,SAxBD;AAyBH,KA3BM,CAAP;AA4BH,CAhCD;;AAkCAa,OAAOC,OAAP,GAAiBzB,OAAjB","file":"scraper.js","sourcesContent":["import cheerio from 'cheerio';\nimport request from 'request';\n\nconst restaurants = {\n    dairyqueen: {\n        menu: 'https://www.dairyqueen.com/us-en/Menu/Food/',\n        item: '.menu-list',\n        titleattr: 'title',\n        image: '.item-container',\n        imgattr: 'src',\n        homepage: 'http://www.dairyqueen.com'\n    },\n\n    subway: {\n        menu: 'http://www.subway.com/en-us/menunutrition/menu/all',\n        item:'.menu-cat-prod-title',\n        titleattr: null,\n        image: '.menu-item-title',\n        imgattr: 'src',\n        homepage: 'http://www.subway.com/'\n    }\n    \n}\n\nconst scraper = function(selection) {\n\n    const { menu, item, titleattr, image, imgattr, homepage } = restaurants[selection];\n\n    return new Promise(function(resolve, reject) {\n\n        request.get(menu, function(error, response, body) {\n            const $ = cheerio.load(body);\n            let results = [];\n\n            if (selection === 'dairyqueen') {\n                $(item).find('a').each(function(i, element) {\n                    let menuItem = {};\n                    menuItem.name = $(element).attr('title');\n                    results.push(menuItem);\n                });\n            } else if (selection === 'subway') {\n                $(item).each(function(i, element) {\n                    let menuItem = {};\n                    menuItem.name = $(element).text();\n                    results.push(menuItem);\n                });\n            }\n\n            $(image).find('img').each((index, picture) => {\n                let pic = $(picture).attr(imgattr);\n                results[index].image = homepage + pic\n            });\n\n            resolve(results);\n        });\n    })\n}\n\nmodule.exports = scraper;\n"]}